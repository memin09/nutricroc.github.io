<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nutricroc - Contacto</title>
  <link rel="icon" href="img/cocodrilo1.png">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.cdnfonts.com/css/argent-cf" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Playfair Display', serif;
      background: #F5F5DC;
      margin: 0;
      padding: 0;
      color: #333;
      overflow-x: hidden;
      overflow-y: auto;
    }

    /* Scrollbar personalizada */
    ::-webkit-scrollbar {
      width: 10px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    ::-webkit-scrollbar-thumb {
      background: #295732;
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #1e3d24;
    }

    * {
      scrollbar-width: thin;
      scrollbar-color: #295732 #f1f1f1;
    }

    /* ===== HEADER Y NAVEGACIÓN ===== */
    .header {
      background: #A8C9A8;
      padding: 20px 0;
      border-bottom: 1px solid #A8C9A8;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 50px;
    }

    .header-nav {
      display: flex;
      gap: 40px;
      position: relative;
    }

    .nav-left {
      justify-content: flex-end;
      flex: 1;
    }

    .nav-right {
      justify-content: flex-start;
      flex: 1;
    }

    .nav-item {
      position: relative;
    }

    .nav-item > a {
      text-decoration: none;
      color: #333;
      font-size: 18px;
      font-weight: 500;
      transition: color 0.3s ease;
      padding: 12px 0;
      display: block;
      position: relative;
    }

    .nav-item > a:hover {
      color: #295732;
    }

    .nav-item > a::after {
      content: '';
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      width: 6px;
      height: 6px;
      background: #295732;
      border-radius: 50%;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .nav-item > a:hover::after {
      opacity: 1;
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 0;
      background: #fff;
      border: 1px solid #eee;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      min-width: 220px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(10px);
      transition: all 0.3s ease;
      z-index: 1000;
      padding: 12px 0;
    }

    .nav-item:hover .dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .dropdown-menu a {
      display: block;
      padding: 12px 24px;
      text-decoration: none;
      color: #333;
      font-size: 15px;
      transition: all 0.3s ease;
      position: relative;
    }

    .dropdown-menu a:hover {
      color: #295732;
      background: #f9f9f9;
    }

    .dropdown-menu a::before {
      content: '';
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      width: 5px;
      height: 5px;
      background:#76DCD8;
      border-radius: 50%;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .dropdown-menu a:hover::before {
      opacity: 1;
    }

    .header-center {
      text-align: center;
      padding: 0 50px;
    }

    .header-logo {
      font-family: 'Classy Marisa';
      font-size: 48px;
      color: #295732;
      margin: 0;
    }

    .logo-image {
      height: 70px;
      width: auto;
    }

    .header-icons {
      display: flex;
      gap: 15px;
      align-items: center;
      position: relative;
    }

    .icon-btn {
      background: none;
      border: none;
      color: #333;
      font-size: 28px;
      cursor: pointer;
      transition: color 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      position: relative;
    }

    .icon-btn:hover {
      color: #295732;
      background: #f9f9f9;
    }

    .cart-count {
      position: absolute;
      top: 2px;
      right: 2px;
      background: #295732;
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 11px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
      line-height: 1;
    }

    /* ===== MENÚ DESPLEGABLE DEL USUARIO ===== */
    .user-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      background: #fff;
      border: 1px solid #eee;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      min-width: 180px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(10px);
      transition: all 0.3s ease;
      z-index: 1000;
      padding: 12px 0;
    }

    .user-dropdown.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .user-dropdown a {
      display: block;
      padding: 12px 24px;
      text-decoration: none;
      color: #333;
      font-size: 15px;
      transition: all 0.3s ease;
      position: relative;
    }

    .user-dropdown a:hover {
      color: #295732;
      background: #f9f9f9;
    }

    .user-dropdown a::before {
      content: '';
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      width: 5px;
      height: 5px;
      background:#76DCD8;
      border-radius: 50%;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .user-dropdown a:hover::before {
      opacity: 1;
    }

    /* ===== CARRITO DE COMPRAS MEJORADO ===== */
    .cart-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      display: none;
    }

    .cart-sidebar {
      position: fixed;
      top: 0;
      right: 0;
      width: 30%;
      height: 100%;
      background-color: white;
      box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
      z-index: 1001;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      border-top-left-radius: 30px;
      border-bottom-left-radius: 30px;
      overflow: hidden;
    }

    .cart-sidebar.open {
      transform: translateX(0);
    }

    .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid #eee;
      border-top-left-radius: 30px;
      position: sticky;
      top: 0;
      background: white;
      z-index: 10;
    }

    .cart-title {
      font-family:'Playfair Display', serif;
      font-size: 20px;
      color: #295732;
      margin: 0;
    }

    .cart-count-title {
      font-size: 20px;
      color: #295732;
      margin-left: 8px;
      font-weight: bold;
    }

    .close-cart {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #333;
    }

    .cart-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      border-bottom-left-radius: 30px;
    }

    .cart-items-container {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      background: #fff;
      position: relative;
      border-bottom-left-radius: 30px;
      min-height: 200px;
    }

    .cart-items-container::-webkit-scrollbar {
      width: 8px;
    }

    .cart-items-container::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    .cart-items-container::-webkit-scrollbar-thumb {
      background: #295732;
      border-radius: 10px;
    }

    .cart-items-container::-webkit-scrollbar-thumb:hover {
      background: #1e3d24;
    }

    .cart-empty {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      text-align: center;
      border-bottom-left-radius: 30px;
    }

    .cart-empty-image {
      width: 400px;
      height: 300px;
      background: 
        url('/img/boldadecomprasco.png')
        center/cover no-repeat;
      margin-bottom: 20px;
      border-radius: 10px;
      position: relative;
    }

    .cart-empty-image::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 10px;
    }

    .cart-empty-text {
      font-size: 18px;
      color: #555;
      margin-bottom: 20px;
      font-family: 'Cormorant Garamond', serif;
      font-weight: 500;
      letter-spacing: 0.5px;
    }

    .discover-btn {
      background: #7ed6a5;
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 30px;
      font-family: 'Argent CF', sans-serif;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .discover-btn:hover {
      background: #63b784;
      transform: translateY(-3px);
    }

    /* ===== ÍTEMS DEL CARRITO MEJORADOS ===== */
    .cart-item {
      display: flex;
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
      position: relative;
    }

    .cart-item-image {
      width: 80px;
      height: 80px;
      border-radius: 10px;
      overflow: hidden;
      margin-right: 15px;
      flex-shrink: 0;
    }

    .cart-item-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .cart-item-details {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .cart-item-info {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
    }

    .cart-item-price {
      font-weight: bold;
      color: #333;
      font-size: 18px;
    }

    .cart-item-actions {
      display: flex;
      gap: 10px;
    }

    .cart-item-action {
      background: none;
      border: none;
      cursor: pointer;
      color: #295732;
      font-size: 18px;
      transition: color 0.3s ease;
      padding: 5px;
    }

    .cart-item-action:hover {
      color: #1e3d24;
    }

    .cart-item-name {
      font-family: 'Cormorant Garamond', serif;
      font-size: 20px;
      color: #000;
      margin-top: 5px;
    }

    .cart-item-quantity {
      display: flex;
      align-items: center;
      margin-top: 10px;
      font-size: 14px;
      color: #666;
    }

    .quantity-display {
      font-weight: bold;
      color: #295732;
    }

    /* NUEVO: Spinner para eliminación - CORREGIDO PARA SOLO LA SECCIÓN DE PRODUCTOS */
    .delete-spinner {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 20;
      border-radius: 10px;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(41, 87, 50, 0.3);
      border-radius: 50%;
      border-top-color: #295732;
      animation: spin 1s linear infinite;
      margin-bottom: 15px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .delete-confirmation {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 20;
      border-radius: 10px;
    }

    .confirmation-image {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background-color: #295732;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 0px;
    }

    .confirmation-image i {
      color: white;
      font-size: 40px;
    }
    
    .confirmation-text {
      font-size: 18px;
      color: #333;
      font-weight: 500;
      margin-top: 15px;
    }

    /* ===== PANTALLA DE EDICIÓN ===== */
    .edit-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: white;
      z-index: 20;
      display: none;
      flex-direction: column;
      padding: 20px;
      overflow-y: auto;
      transform: translateX(100%);
      transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .edit-screen.active {
      display: flex;
      transform: translateX(0);
    }

    .edit-screen.slide-out {
      transform: translateX(100%);
    }

    .edit-header {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }

    .edit-back {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      transition: background-color 0.3s ease;
    }

    .edit-back:hover {
      background-color: #f5f5f5;
    }

    .edit-product-images {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
      justify-content: center;
    }

    .edit-product-image {
      width: 150px;
      height: 150px;
      border-radius: 10px;
      overflow: hidden;
    }

    .edit-product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .edit-product-info {
      text-align: center;
      margin-bottom: 30px;
    }

    .edit-product-name {
      font-family: 'Playfair Display', serif;
      font-size: 25px;
      margin-bottom: 10px;
    }

    .edit-product-price {
      font-size: 22px;
      font-weight: bold;
      color: #1e3d24;
    }

    .edit-quantity-section {
      margin-bottom: 30px;
      text-align: center;
    }

    .edit-quantity-label {
      display: block;
      margin-bottom: 10px;
      font-size: 18px;
    }

    .edit-quantity-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }

    .edit-quantity-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 1px solid #ddd;
      background: white;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .edit-quantity-input {
      width: 60px;
      height: 40px;
      text-align: center;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 18px;
    }

    .edit-actions {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }

    .save-btn {
      background: #C9B656;
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 30px;
      font-family: 'Playfair Display', serif;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 140px;
    }

    .save-btn:hover {
      background: #C9B656;
    }

    .save-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    /* ===== RESUMEN DEL CARRITO MEJORADO ===== */
    .cart-summary {
      padding: 20px;
      border-top: 1px solid #eee;
      background: white;
      position: sticky;
      bottom: 0;
      display: none;
      border-bottom-left-radius: 30px;
    }

    .cart-summary.visible {
      display: block;
    }

    .cart-summary-title {
      font-size: 18px;
      font-weight: bold;
      color: #295732;
      margin-bottom: 15px;
      text-align: center;
    }

    .cart-summary-details {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 16px;
    }

    .summary-label {
      color: #666;
    }

    .summary-value {
      font-weight: 500;
      color: #1e3d24;
    }

    .cart-total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      font-size: 20px;
      font-weight: bold;
    }

    .cart-total-amount {
      color: #1e3d24;
    }

    .checkout-btn {
      width: 100%;
      background: #7ed6a5;
      color: white;
      border: none;
      padding: 15px;
      border-radius: 30px;
      font-family: 'Playfair Display', serif;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .checkout-btn:hover {
      background: #63b784;
      transform: translateY(-3px);
    }

    /* ===== CHECKOUT FULLSCREEN DEL SEGUNDO CÓDIGO ===== */
    .checkout-fullscreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: white;
      z-index: 3000;
      display: none;
      flex-direction: column;
      overflow: hidden;
    }

    .checkout-fullscreen.active {
      display: flex;
    }

    .checkout-full-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 40px;
      border-bottom: 1px solid #eee;
      background: white;
      z-index: 10;
      position: relative;
    }

    .checkout-full-title {
      font-family: 'Playfair Display', serif;
      font-size: 24px;
      color: #295732;
      margin: 0;
    }

    .close-checkout-full {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      transition: background-color 0.3s ease;
    }

    .close-checkout-full:hover {
      background-color: #f5f5f5;
    }

    .checkout-full-content {
      flex: 1;
      display: flex;
      overflow: hidden;
    }

    /* Panel izquierdo: Resumen de compra FIJO */
    .checkout-left-panel {
      flex: 1;
      background: #f9f9f9;
      padding: 30px;
      overflow-y: auto;
      border-right: 1px solid #eee;
      display: flex;
      flex-direction: column;
    }

    .checkout-summary-fixed {
      margin-bottom: 30px;
      padding: 20px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      position: sticky;
      top: 0;
      z-index: 5;
    }

    .checkout-summary-title {
      font-size: 18px;
      font-weight: bold;
      color: #295732;
      margin-bottom: 20px;
      text-align: center;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .checkout-summary-count {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      font-size: 16px;
    }

    .checkout-summary-count .summary-total-value {
      color: #1e3d24;
      font-weight: bold;
    }

    .checkout-products-list {
      flex: 1;
      overflow-y: auto;
      padding-right: 10px;
      max-height: 300px;
    }

    .checkout-products-list::-webkit-scrollbar {
      width: 8px;
    }

    .checkout-products-list::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    .checkout-products-list::-webkit-scrollbar-thumb {
      background: #295732;
      border-radius: 10px;
    }

    .checkout-product-item {
      display: flex;
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }

    .checkout-product-image {
      width: 80px;
      height: 80px;
      border-radius: 10px;
      overflow: hidden;
      margin-right: 15px;
      flex-shrink: 0;
    }

    .checkout-product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .checkout-product-details {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .checkout-product-name {
      font-family: 'Cormorant Garamond', serif;
      font-size: 18px;
      color: #000;
      margin-bottom: 5px;
    }

    .checkout-product-quantity {
      font-size: 14px;
      color: #666;
      margin-bottom: 5px;
    }

    .checkout-product-price {
      font-weight: bold;
      color: #1e3d24;
      font-size: 16px;
    }

    .checkout-summary-total {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }

    .summary-total-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .summary-total-label {
      color: #666;
    }

    .summary-total-value {
      font-weight: 500;
      color: #1e3d24;
    }

    .summary-grand-total {
      font-size: 18px;
      font-weight: bold;
      color: #1e3d24;
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid #eee;
    }

    /* Panel derecho: Pasos del checkout */
    .checkout-right-panel {
      flex: 1.5;
      padding: 30px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    /* Barra de progreso */
    .progress-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 30px auto 40px;
      position: relative;
      max-width: 600px;
      width: 100%;
    }

    .progress-bar::before {
      content: '';
      position: absolute;
      top: 15px;
      left: 10%;
      right: 10%;
      height: 3px;
      background: #eee;
      z-index: 1;
    }

    .progress-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 2;
      flex: 1;
    }

    .step-circle {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: white;
      border: 2px solid #ddd;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: #999;
      margin-bottom: 8px;
      transition: all 0.3s ease;
    }

    .progress-step.active .step-circle {
      background: #295732;
      border-color: #295732;
      color: white;
    }

    .progress-step.completed .step-circle {
      background: #295732;
      border-color: #295732;
      color: white;
    }

    .step-label {
      font-size: 14px;
      color: #999;
      text-align: center;
    }

    .progress-step.active .step-label {
      color: #295732;
      font-weight: 500;
    }

    .progress-step.completed .step-label {
      color: #295732;
    }

    /* Pasos del checkout */
    .checkout-step {
      display: none;
      flex-direction: column;
      flex: 1;
    }

    .checkout-step.active {
      display: flex;
    }

    .step-title {
      font-size: 24px;
      color: #295732;
      margin-bottom: 30px;
      text-align: center;
      font-family: 'Cormorant Garamond', serif;
      font-weight: 600;
    }

    .step-image-container {
      text-align: center;
      margin-bottom: 30px;
    }

    .step-image {
      width: 250px;
      height: 180px;
      object-fit: contain;
      margin: 0 auto;
    }

    /* Paso 1: Datos de entrega */
    .delivery-form {
      display: flex;
      flex-direction: column;
      gap: 25px;
      max-width: 500px;
      margin: 0 auto;
      padding: 0 20px 20px;
      width: 100%;
      box-sizing: border-box;
    }

    .delivery-form .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .delivery-form .form-group label {
      font-size: 16px;
      color: #555;
      font-weight: 500;
      margin-bottom: 5px;
    }

    .delivery-form .form-group select,
    .delivery-form .form-group input,
    .delivery-form .form-group textarea {
      padding: 14px 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      font-family: 'Playfair Display', serif;
      outline: none;
      transition: border-color 0.3s ease;
      background-color: white;
      width: 100%;
      box-sizing: border-box;
    }

    .delivery-form .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .delivery-form .form-group select:focus,
    .delivery-form .form-group input:focus,
    .delivery-form .form-group textarea:focus {
      border-color: #295732;
      box-shadow: 0 0 0 2px rgba(41, 87, 50, 0.2);
    }

    .delivery-form .form-group select:disabled {
      background-color: #f5f5f5;
      cursor: not-allowed;
    }

    /* Paso 2: Método de pago */
    .payment-options {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin: 30px 0;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
      padding: 0 20px;
      width: 100%;
      box-sizing: border-box;
    }

    .payment-option {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 18px 20px;
      border: 2px solid #eee;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      background-color: white;
    }

    .payment-option:hover {
      border-color: #295732;
    }

    .payment-option.selected {
      border-color: #295732;
      background-color: rgba(41, 87, 50, 0.1);
    }

    .payment-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: #295732;
    }

    .payment-label {
      font-size: 18px;
      font-weight: 500;
      color: #333;
      flex: 1;
    }

    .payment-radio {
      display: flex;
      align-items: center;
    }

    .payment-radio input[type="radio"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      margin: 0;
    }

    .card-fields {
      display: none;
      flex-direction: column;
      gap: 20px;
      margin-top: 30px;
      padding: 25px;
      background-color: #f9f9f9;
      border-radius: 12px;
      animation: fadeIn 0.3s ease;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
      width: 100%;
      box-sizing: border-box;
    }

    .card-fields.show {
      display: flex;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .expiry-cvv-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    .card-fields .form-group {
      margin-bottom: 0;
    }

    /* Paso 3: Confirmación */
    .confirmation-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 30px;
      text-align: center;
      flex: 1;
    }

    .confetti-success {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }

    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #295732;
      opacity: 0.8;
      border-radius: 2px;
      animation: fall linear forwards;
    }

    .confetti:nth-child(2n) {
      background-color: #1e3d24;
    }

    .confetti:nth-child(3n) {
      background-color: #704214;
    }

    .confetti:nth-child(4n) {
      background-color: #76DCD8;
    }

    @keyframes fall {
      0% {
        transform: translateY(-100px) rotate(0deg);
        opacity: 1;
      }
      70% {
        opacity: 0.8;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    .confirmation-image-large {
      width: 300px;
      height: 200px;
      object-fit: contain;
      margin-bottom: 15px;
    }

    .confirmation-title {
      font-family: 'Classy Marisa';
      font-size: 30px;
      color: #295732;
      margin-bottom: 25px;
    }

    .confirmation-message {
      font-size: 18px;
      color: #666;
      margin-bottom: 25px;
      max-width: 500px;
      line-height: 1.6;
    }

    /* Botón de reenviar correo */
    .reenviar-correo-btn {
      background: #C9B656;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 30px;
      font-family: 'Playfair Display', serif;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 15px;
      min-width: 180px;
    }

    .reenviar-correo-btn:hover:not(:disabled) {
      background: #b5a44e;
      transform: translateY(-2px);
    }

    .reenviar-correo-btn:disabled {
      background: #cccccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* Botones de navegación */
    .checkout-navigation {
      display: flex;
      gap: 15px;
      margin-top: 40px;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
      width: 100%;
      box-sizing: border-box;
    }

    .nav-btn {
      flex: 1;
      background: #6F4E37;
      color: white;
      border: none;
      padding: 16px;
      border-radius: 30px;
      font-family: 'Playfair Display', serif;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .nav-btn:hover {
      background: #6F4E37;
      transform: translateY(-3px);
    }

    .nav-btn-secondary {
      background: #eee;
      color: #333;
    }

    .nav-btn-secondary:hover {
      background: #ddd;
    }

    /* Spinner para cambio de paso */
    .step-spinner {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.9);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }

    .step-spinner.active {
      display: flex;
    }

    .step-spinner .spinner {
      width: 60px;
      height: 60px;
      border: 6px solid rgba(41, 87, 50, 0.3);
      border-radius: 50%;
      border-top-color: #295732;
      animation: spin 1s linear infinite;
      margin-bottom: 20px;
    }

    .step-spinner-text {
      font-size: 18px;
      color: #333;
      font-weight: 500;
    }

    /* ===== MODAL DE CAMBIAR CORREO ===== */
    .cambiar-correo-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 3000;
      display: none;
      justify-content: center;
      align-items: center;
    }

    .cambiar-correo-modal.active {
      display: flex;
    }

    .cambiar-correo-content {
      background: white;
      border-radius: 20px;
      width: 90%;
      max-width: 500px;
      padding: 30px;
      position: relative;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .cambiar-correo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }

    .cambiar-correo-title {
      font-family: 'Playfair Display', serif;
      font-size: 24px;
      color: #295732;
      margin: 0;
    }

    .close-cambiar-correo {
      background: none;
      border: none;
      font-size: 28px;
      cursor: pointer;
      color: #333;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s ease;
    }

    .close-cambiar-correo:hover {
      background-color: #f5f5f5;
    }

    .cambiar-correo-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .cambiar-correo-form .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .cambiar-correo-form .form-group label {
      font-size: 16px;
      color: #555;
      font-weight: 500;
    }

    .cambiar-correo-form .form-group input {
      padding: 14px 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      font-family: 'Playfair Display', serif;
      outline: none;
      transition: border-color 0.3s ease;
      width: 100%;
      box-sizing: border-box;
    }

    .cambiar-correo-form .form-group input:focus {
      border-color: #295732;
      box-shadow: 0 0 0 2px rgba(41, 87, 50, 0.2);
    }

    .guardar-correo-btn {
      background: #295732;
      color: white;
      border: none;
      padding: 16px 30px;
      border-radius: 30px;
      font-family: 'Playfair Display', serif;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 10px;
      width: 100%;
    }

    .guardar-correo-btn:hover {
      background: #1e3d24;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(41, 87, 50, 0.3);
    }

    .guardar-correo-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* ===== NOTIFICACIONES ===== */
    .notification {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%) translateY(-100%);
      background-color: #295732;
      color: white;
      padding: 15px 30px;
      text-align: center;
      z-index: 2000;
      transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      border-radius: 0 0 10px 10px;
      max-width: 400px;
      width: 90%;
    }

    .notification.show {
      transform: translateX(-50%) translateY(0);
    }

    .notification-content {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .notification-icon {
      font-size: 20px;
    }

    .notification-text {
      font-size: 16px;
      font-weight: 500;
    }

    /* NUEVO: Notificación de stock insuficiente */
    .stock-notification {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background-color: #dc3545;
      color: white;
      padding: 25px 40px;
      text-align: center;
      z-index: 3000;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      transition: transform 0.3s ease, opacity 0.3s ease;
      opacity: 0;
      max-width: 500px;
      width: 90%;
      font-family: 'Playfair Display', serif;
    }

    .stock-notification.show {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }

    .stock-notification i {
      font-size: 40px;
      margin-bottom: 15px;
      display: block;
    }

    .stock-notification h3 {
      margin: 0 0 10px 0;
      font-size: 24px;
    }

    .stock-notification p {
      margin: 0;
      font-size: 16px;
      line-height: 1.5;
    }

    /* NUEVO: Notificación de error en pago */
    .payment-error-notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%) translateY(-100px);
      background-color: #dc3545;
      color: white;
      padding: 20px 30px;
      text-align: center;
      z-index: 4000;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      transition: transform 0.3s ease, opacity 0.3s ease;
      opacity: 0;
      max-width: 500px;
      width: 90%;
      font-family: 'Playfair Display', serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .payment-error-notification.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    .payment-error-notification i {
      font-size: 40px;
      margin-bottom: 5px;
    }

    .payment-error-notification h3 {
      margin: 0 0 5px 0;
      font-size: 20px;
    }

    .payment-error-notification p {
      margin: 0;
      font-size: 16px;
      line-height: 1.5;
    }

    /* NUEVO: Notificación de correo enviado */
    .email-sent-notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%) translateY(-100px);
      background-color: #295732;
      color: white;
      padding: 15px 30px;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      z-index: 3000;
      transition: transform 0.4s ease;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .email-sent-notification.show {
      transform: translateX(-50%) translateY(0);
    }

    .email-sent-notification i {
      font-size: 20px;
    }

    .email-sent-notification span {
      font-size: 16px;
      font-weight: 500;
    }

    /* NUEVO: Notificación de reenvío de correo */
    .reenvio-notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%) translateY(-100px);
      background-color: #295732;
      color: white;
      padding: 20px 30px;
      text-align: center;
      z-index: 4000;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      transition: transform 0.3s ease, opacity 0.3s ease;
      opacity: 0;
      max-width: 500px;
      width: 90%;
      font-family: 'Playfair Display', serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .reenvio-notification.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    .reenvio-notification i {
      font-size: 40px;
      margin-bottom: 5px;
    }

    .reenvio-notification h3 {
      margin: 0 0 5px 0;
      font-size: 20px;
    }

    .reenvio-notification p {
      margin: 0;
      font-size: 16px;
      line-height: 1.5;
    }

    .correo-renviado-notification {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background-color: #295732;
      color: white;
      padding: 30px 50px;
      text-align: center;
      z-index: 3001;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      transition: transform 0.3s ease, opacity 0.3s ease;
      opacity: 0;
      max-width: 400px;
      width: 90%;
    }

    .correo-renviado-notification.show {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }

    .correo-renviado-notification .notification-icon {
      font-size: 40px;
      margin-bottom: 15px;
    }

    .correo-renviado-notification .notification-text {
      font-size: 20px;
      font-weight: 600;
    }

    /* ===== MODAL DE AUTENTICACIÓN ===== */
    .auth-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      display: none;
    }

    .auth-sidebar {
      position: fixed;
      top: 0;
      right: 0;
      width: 30%;
      height: 100%;
      background-color: white;
      box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
      z-index: 1001;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      border-top-left-radius: 20px;
      border-bottom-left-radius: 20px;
      overflow: hidden;
    }

    .auth-sidebar.open {
      transform: translateX(0);
    }

    .auth-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid #eee;
      border-top-left-radius: 20px;
    }

    .auth-title {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      color: #295732;
      margin: 0;
    }

    .close-auth {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #333;
    }

    .auth-content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }

    .auth-image {
      width: 100%;
      height: 250px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      background: transparent;
    }

    .auth-image img {
      width: auto;
      height: 100%;
      object-fit: contain;
    }

    .auth-form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .form-group label {
      font-size: 14px;
      color: #555;
      font-weight: 500;
    }

    .form-group input {
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      font-family: 'Playfair Display', serif;
      outline: none;
      transition: border-color 0.3s ease;
    }

    .form-group input:focus {
      border-color: #295732;
    }

    .auth-btn {
      padding: 12px 25px;
      background-color:#C9B656;
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 16px;
      font-family: 'Playfair Display', serif;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 10px;
    }

    .auth-btn:hover {
      background-color:#C9B656;
    }

    .auth-switch {
      text-align: center;
      margin-top: 20px;
      font-size: 14px;
    }

    .auth-switch a {
      color: #295732;
      text-decoration: none;
      font-weight: 500;
    }

    .auth-switch a:hover {
      text-decoration: underline;
    }

    /* NUEVO: Enlace "Olvidaste tu contraseña" */
    .forgot-password-link {
      text-align: right;
      margin-top: -10px;
      margin-bottom: 10px;
    }

    .forgot-password-link a {
      color: #295732;
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
    }

    .forgot-password-link a:hover {
      text-decoration: underline;
    }

    /* NUEVO: Pantalla de recuperación de contraseña */
    .recovery-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: white;
      z-index: 10;
      display: none;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }

    .recovery-screen.active {
      display: flex;
      transform: translateX(0);
    }

    .recovery-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid #eee;
      border-top-left-radius: 20px;
    }

    .recovery-title {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      color: #295732;
      margin: 0;
      flex: 1;
      text-align: center;
    }

    .recovery-back {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      transition: background-color 0.3s ease;
    }

    .recovery-back:hover {
      background-color: #f5f5f5;
    }

    .recovery-content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    .recovery-image {
      width: 100%;
      height: 250px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      background: transparent;
    }

    .recovery-image img {
      width: auto;
      height: 100%;
      object-fit: contain;
    }

    .recovery-form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .recovery-message {
      text-align: center;
      font-size: 16px;
      color: #555;
      margin-bottom: 20px;
      line-height: 1.6;
    }

    /* ===== SECCIÓN DE IMAGEN DEL HEADER ===== */
    .header-image {
      width: 100%;
      height: 540px;
      background: #C3DEB3;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      text-align: center;
      position: relative;
      overflow: hidden;
      margin-bottom: -20px;
    }

    .header-image h1 {
      font-family: 'Classy Marisa';
      font-size: 72px;
      margin: 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      color:#295732;
      z-index: 2;
    }

    .crocodile-image {
      position: absolute;
      bottom: -20px;
      right: -10px;
      width: 500px;
      height: auto;
      z-index: 2;
      clip-path: ellipse(70% 100% at 50% 100%);
    }

    .header-image::after {
      content: "";
      position: absolute;
      bottom: -30px;
      left: 0;
      width: 100%;
      height: 170px;
      background: #295732;
      clip-path: ellipse(70% 100% at 50% 100%);
      z-index: 1;
    }

    /* ===== SECCIÓN DE CONTACTO ===== */
    .contact-section {
      display: flex;
      justify-content: center;
      padding: 60px 40px 80px;
      background: #F5F5DC;
      text-align: center;
      color: #000;
      flex-wrap: wrap;
      gap: 40px;
      margin-top: -20px;
      position: relative;
    }

    .contact-box {
      flex: 1;
      margin: 0 20px;
      min-width: 280px;
      position: relative;
    }

    .contact-box h2 {
      font-family: 'Classy Marisa';
      font-size: 36px;
      color: #000;
      margin-bottom: 20px;
      text-align: center;
      position: relative;
    }

    .contact-image {
      position: absolute;
      top: -50px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: auto;
      z-index: 1;
    }

    .contact-box p {
      font-size: 16px;
      margin: 8px 0;
    }

    .contact-form {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .contact-form input,
    .contact-form textarea {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
      font-family: 'Playfair Display', serif;
      color: #000;
    }

    .contact-form textarea {
      height: 120px;
      resize: none;
    }

    .contact-form button {
      padding: 12px 30px;
      font-size: 18px;
      border: none;
      background: #295732 ;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Playfair Display', serif;
      transition: 0.3s ease;
      margin-top: 10px;
    }

    .contact-form button:hover {
      background: #5ec08f;
    }

    /* ===== GALERÍA ===== */
    .gallery-section {
      padding: 80px 20px;
      background: #fff;
      display: flex;
      justify-content: center;
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(6, 1fr); 
      grid-auto-rows: minmax(150px, auto); 
      gap: 15px;
      max-width: 1200px; 
      width: 100%;
    }

    .gallery-item {
      position: relative;
      overflow: hidden;
      border-radius: 12px;
    }

    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: opacity 0.5s ease-in-out;
    }

    .gallery-item img.overlay {
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0;
    }

    .gallery-item:hover img.overlay {
      opacity: 1;
    }

    /* ===== FOOTER ===== */
    .footer-section {
      background: 
        url('/img/nutriblanco.jpeg')
        center/700px 450px no-repeat;
      padding: 60px 0 30px;
      border-top: 1px solid #eee;
      position: relative;
    }

    .footer-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background:rgba(245, 245, 220, 0.85);
      z-index: 1;
    }

    .footer-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      padding: 0 20px;
      position: relative;
      z-index: 2;
    }

    .footer-left {
      flex: 1;
      max-width: 400px;
    }

    .footer-right {
      flex: 1;
      max-width: 500px;
    }

    .footer-title {
      font-family: 'Great Vibes', cursive;
      font-size: 36px;
      color: #295732;
      margin-bottom: 20px;
    }

    .footer-subtitle {
      font-size: 24px;
      margin-bottom: 15px;
      color: #333;
    }

    .social-icons {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
    }

    .social-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background-color: #295732;
      border-radius: 50%;
      color: white;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .social-icon:hover {
      background-color: #1e3d24;
      transform: translateY(-3px);
    }

    .newsletter-form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .newsletter-input {
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 25px;
      font-size: 16px;
      font-family: 'Playfair Display', serif;
      outline: none;
      transition: border-color 0.3s ease;
      background: rgba(255, 255, 255, 0.9);
    }

    .newsletter-input:focus {
      border-color: #295732;
      background: white;
    }

    .newsletter-btn {
      padding: 12px 25px;
      background-color: #295732;
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 16px;
      font-family: 'Playfair Display', serif;
      cursor: pointer;
      transition: background-color 0.3s ease;
      align-self: flex-start;
    }

    .newsletter-btn:hover {
      background-color: #1e3d24;
    }

    .footer-bottom {
      max-width: 1300px;
      margin: 40px auto 0;
      padding: 20px;
      text-align: center;
      font-size: 14px;
      position: relative;
      z-index: 2;
    }

    .scroll-to-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      background-color: #295732;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .scroll-to-top:hover {
      background-color: #1e3d24;
      transform: translateY(-3px);
    }

    .scroll-to-top i {
      color: white;
      font-size: 20px;
    }

    /* ===== MEDIA QUERIES ===== */
    @media (max-width: 1024px) {
      .auth-sidebar,
      .cart-sidebar {
        width: 50%;
      }
      
      .checkout-fullscreen .checkout-full-content {
        flex-direction: column;
      }
      
      .checkout-left-panel {
        border-right: none;
        border-bottom: 1px solid #eee;
        max-height: 40vh;
      }
      
      .checkout-right-panel {
        max-height: 60vh;
      }
      
      .gallery {
        grid-template-columns: repeat(3, 1fr);
        grid-auto-rows: minmax(150px, auto);
        gap: 12px;
      }
    }

    @media (max-width: 768px) {
      .header-top {
        padding: 0 20px;
      }
      
      .header-nav {
        gap: 20px;
      }
      
      .header-center {
        padding: 0 20px;
      }
      
      .header-logo {
        font-size: 36px;
      }
      
      .contact-section {
        padding: 40px 20px;
        flex-direction: column;
        gap: 40px;
      }
      
      .contact-box {
        margin: 0;
        min-width: 100%;
      }
      
      .footer-container {
        flex-direction: column;
        gap: 40px;
      }
      
      .footer-left, .footer-right {
        max-width: 100%;
      }
      
      .social-icons {
        justify-content: center;
      }
      
      .newsletter-form {
        max-width: 300px;
        margin: 0 auto;
      }
      
      .newsletter-btn {
        align-self: center;
      }
      
      .scroll-to-top {
        bottom: 20px;
        right: 20px;
        width: 45px;
        height: 45px;
      }
      
      .cart-sidebar, .auth-sidebar {
        width: 85%;
      }
      
      .cart-empty-image {
        width: 250px;
        height: 200px;
        background-size: contain;
        background-position: center;
      }
      
      .cart-count-title {
        font-size: 18px;
      }
      
      .notification {
        width: 85%;
        max-width: none;
      }
      
      .gallery {
        grid-template-columns: repeat(2, 1fr);
        grid-auto-rows: minmax(120px, auto);
        gap: 10px;
      }
      
      .user-dropdown {
        position: fixed;
        top: auto;
        bottom: 0;
        left: 0;
        width: 100%;
        border-radius: 20px 20px 0 0;
        transform: translateY(100%);
        transition: transform 0.3s ease;
        box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
      }
      
      .user-dropdown.show {
        transform: translateY(0);
      }
      
      .expiry-cvv-container {
        grid-template-columns: 1fr;
        gap: 15px;
      }
      
      .checkout-full-header {
        padding: 15px 20px;
      }
      
      .checkout-left-panel,
      .checkout-right-panel {
        padding: 20px;
      }
      
      .progress-bar {
        max-width: 90%;
      }
      
      .checkout-form,
      .payment-options,
      .card-fields {
        max-width: 90%;
      }
    }

    @media (max-width: 480px) {
      .header-top {
        padding: 0 10px;
      }
      
      .header-logo {
        font-size: 28px;
      }
      
      .header-icons {
        gap: 10px;
      }
      
      .icon-btn {
        width: 40px;
        height: 40px;
        font-size: 24px;
      }
      
      .header-image h1 {
        font-size: 48px;
      }
      
      .crocodile-image {
        width: 300px;
      }
      
      .contact-box h2 {
        font-size: 28px;
      }
      
      .footer-title {
        font-size: 28px;
      }
      
      .footer-subtitle {
        font-size: 20px;
      }
      
      .cart-empty-image {
        width: 200px;
        height: 150px;
      }
      
      .confirmation-image {
        width: 200px;
        height: 150px;
      }
      
      .confirmation-title {
        font-size: 28px;
      }
      
      .checkout-navigation {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <!-- Notificación de producto agregado -->
  <div class="notification" id="notification">
    <div class="notification-content">
      <span class="notification-icon">✓</span>
      <span class="notification-text">El producto se agregó de manera exitosa</span>
    </div>
  </div>

  <!-- Notificación de error en pago -->
  <div class="payment-error-notification" id="paymentErrorNotification">
    <i class="fas fa-exclamation-triangle"></i>
    <h3>Error al procesar el pago</h3>
    <p>Verifica el saldo o datos de tu tarjeta</p>
  </div>

  <!-- Notificación de stock insuficiente -->
  <div class="stock-notification" id="stockNotification">
    <i class="fas fa-exclamation-circle"></i>
    <h3>Stock insuficiente</h3>
    <p>No contamos con suficiente stock para esta cantidad</p>
  </div>

  <!-- Notificación de correo enviado -->
  <div class="email-sent-notification" id="emailSentNotification">
    <i class="fas fa-check-circle"></i>
    <span>Correo enviado con éxito</span>
  </div>

  <!-- Notificación de reenvío de correo -->
  <div class="reenvio-notification" id="reenvioNotification">
    <i class="fas fa-check-circle"></i>
    <h3>Correo reenviado</h3>
    <p>Se ha reenviado el correo de confirmación</p>
  </div>

  <!-- Modal para cambiar correo -->
  <div class="cambiar-correo-modal" id="cambiarCorreoModal">
    <div class="cambiar-correo-content">
      <div class="cambiar-correo-header">
        <h2 class="cambiar-correo-title">Cambiar correo electrónico</h2>
        <button class="close-cambiar-correo" id="closeCambiarCorreo">
          <span class="material-icons">close</span>
        </button>
      </div>
      <form class="cambiar-correo-form" id="cambiarCorreoForm">
        <div class="form-group">
          <label for="nuevoCorreo">Nuevo correo electrónico</label>
          <input type="email" id="nuevoCorreo" name="nuevoCorreo" required placeholder="ejemplo@correo.com">
        </div>
        <div class="form-group">
          <label for="confirmarCorreo">Confirmar correo electrónico</label>
          <input type="email" id="confirmarCorreo" name="confirmarCorreo" required placeholder="ejemplo@correo.com">
        </div>
        <button type="submit" class="guardar-correo-btn">Guardar cambios</button>
      </form>
    </div>
  </div>

  <!-- Notificación de correo reenviado -->
  <div class="correo-renviado-notification" id="correoRenviadoNotification">
    <div class="notification-content">
      <span class="notification-icon">✓</span>
      <span class="notification-text">Correo reenviado con éxito</span>
    </div>
  </div>

  <header class="header">
    <div class="header-top">
      <nav class="header-nav nav-left">
        <div class="nav-item"><a href="index.html">Inicio</a></div>
        <div class="nav-item">
          <a href="tienda.html">Productos</a>
          <div class="dropdown-menu">
            <a href="productos.html">Helados</a>
            <a href="productos.html">Panquecitos</a>
            <a href="productos.html">waffles</a>
            <a href="productos.html">Galletas</a>
          </div>
        </div>
        <div class="nav-item"><a href="#">Sobre Nosotros</a></div>
      </nav>

      <div class="header-center">
        <h1 class="header-logo">Nutricroc</h1>
      </div>

      <nav class="header-nav nav-right">
        <div class="nav-item"><a href="#">Preguntas Frecuentes</a></div>
        <div class="nav-item"><a href="#">Contacto</a></div>
      </nav>

      <div class="header-icons">
        <button class="icon-btn" id="userBtn">
          <span class="material-icons">person</span>
        </button>
        <div class="user-dropdown" id="userDropdown">
          <a href="#" id="loginLink">Iniciar Sesión</a>
          <a href="#" id="registerLink">Registrarse</a>
          <a href="#" id="accountLink" style="display: none;">Mi Cuenta</a>
        </div>
        <button class="icon-btn" id="cartBtn">
          <span class="material-icons">shopping_bag</span>
          <span class="cart-count" id="cartCount">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Modal de autenticación -->
  <div class="auth-overlay" id="authOverlay"></div>
  <div class="auth-sidebar" id="authSidebar">
    <div class="auth-header">
      <h2 class="auth-title" id="authTitle">Iniciar Sesión</h2>
      <button class="close-auth" id="closeAuth">
        <span class="material-icons">close</span>
      </button>
    </div>
    <div class="auth-content">
      <div class="auth-image">
        <img src="img/loginnutricroc.png" alt="Imagen de autenticación" id="authImage">
      </div>
      <form class="auth-form" id="authForm">
        <div class="form-group" id="nameField" style="display: none;">
          <label for="name">Nombre completo</label>
          <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
          <label for="email">Correo electrónico</label>
          <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
          <label for="password">Contraseña</label>
          <input type="password" id="password" name="password" required>
        </div>
        <!-- NUEVO: Enlace "Olvidaste tu contraseña" -->
        <div class="forgot-password-link">
          <a href="#" id="forgotPasswordLink">¿Olvidaste tu contraseña?</a>
        </div>
        <div class="form-group" id="confirmPasswordField" style="display: none;">
          <label for="confirmPassword">Confirmar contraseña</label>
          <input type="password" id="confirmPassword" name="confirmPassword" required>
        </div>
        <button type="submit" class="auth-btn" id="authSubmitBtn">Iniciar Sesión</button>
      </form>
      <div class="auth-switch">
        <span id="authSwitchText">¿No tienes una cuenta? </span>
        <a href="#" id="authSwitchLink">Regístrate</a>
      </div>
    </div>
    
    <!-- Recuperación de contraseña -->
    <div class="recovery-screen" id="recoveryScreen">
      <div class="recovery-header">
        <button class="recovery-back" id="recoveryBack">
          <span class="material-icons">arrow_back</span>
        </button>
        <h2 class="recovery-title">Recuperar Contraseña</h2>
      </div>
      <div class="recovery-content">
        <div class="recovery-image">
          <img src="img/contraseña.png" alt="Recuperar contraseña">
        </div>
        <div class="recovery-message">
          <p>Ingresa tu correo electrónico para restablecer tu contraseña. Te enviaremos un enlace de recuperación.</p>
        </div>
        <form class="recovery-form" id="recoveryForm">
          <div class="form-group">
            <label for="recoveryEmail">Correo electrónico</label>
            <input type="email" id="recoveryEmail" name="recoveryEmail" required placeholder="ejemplo@correo.com">
          </div>
          <div class="form-group">
            <label for="confirmRecoveryEmail">Confirmar correo electrónico</label>
            <input type="email" id="confirmRecoveryEmail" name="confirmRecoveryEmail" required placeholder="ejemplo@correo.com">
          </div>
          <button type="submit" class="auth-btn" id="sendRecoveryBtn">Enviar correo de recuperación</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Carrito de compras -->
  <div class="cart-overlay" id="cartOverlay"></div>
  <div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
      <h2 class="cart-title">Tu Carrito <span class="cart-count-title" id="cartCountTitle">(0)</span></h2>
      <button class="close-cart" id="closeCart">
        <span class="material-icons">close</span>
      </button>
    </div>
    <div class="cart-content">
      <div class="cart-items-container" id="cartItemsContainer">
        <div class="cart-empty">
          <div class="cart-empty-image"></div>
          <p class="cart-empty-text">Aún no cuentas con productos</p>
          <button class="discover-btn" onclick="window.location.href='productos.html'">Descubrir</button>
        </div>
      </div>
      
      <!-- Pantalla de edición -->
      <div class="edit-screen" id="editScreen">
        <div class="edit-header">
          <button class="edit-back" id="editBack">
            <span class="material-icons">arrow_back</span>
          </button>
        </div>
        
        <div class="edit-product-images" id="editProductImages">
        </div>
        
        <div class="edit-product-info">
          <div class="edit-product-name" id="editProductName"></div>
          <div class="edit-product-price" id="editProductPrice"></div>
        </div>
        
        <div class="edit-quantity-section">
          <label class="edit-quantity-label">Cantidad</label>
          <div class="edit-quantity-controls">
            <button class="edit-quantity-btn" id="decreaseQuantity">-</button>
            <input type="number" class="edit-quantity-input" id="editQuantityInput" min="1" value="1">
            <button class="edit-quantity-btn" id="increaseQuantity">+</button>
          </div>
        </div>
        
        <div class="edit-actions">
          <button class="save-btn" id="saveEditBtn">
            <span class="save-text">GUARDAR</span>
          </button>
        </div>
      </div>
      
      <!-- Resumen del carrito -->
      <div class="cart-summary" id="cartSummary">
        <div class="cart-summary-title">Resumen</div>
        <div class="cart-summary-details">
          <div class="summary-row">
            <span class="summary-label">Productos</span>
            <span class="summary-value" id="summaryProductCount">0</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Subtotal</span>
            <span class="summary-value" id="summarySubtotal">$0.00</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Envío</span>
            <span class="summary-value" id="summaryEnvio">Gratis</span>
          </div>
          <div class="cart-total">
            <span class="summary-label">Total final</span>
            <span class="cart-total-amount" id="summaryTotalAmount">$0.00</span>
          </div>
        </div>
        <button class="checkout-btn" id="checkoutBtn">Comprar</button>
      </div>
    </div>
  </div>

  <!-- Pantalla completa de checkout (DEL SEGUNDO CÓDIGO) -->
  <div class="checkout-fullscreen" id="checkoutFullscreen">
    <div class="checkout-full-header">
      <h2 class="checkout-full-title">Finalizar compra</h2>
      <button class="close-checkout-full" id="closeCheckoutFull">
        <span class="material-icons">close</span>
      </button>
    </div>
    
    <div class="checkout-full-content">
      <!-- Resumen de compra del checkout -->
      <div class="checkout-left-panel">
        <div class="checkout-summary-fixed">
          <h3 class="checkout-summary-title">Resumen de la compra</h3>
          
          <div class="checkout-summary-count">
            <span>Productos:</span>
            <span class="summary-total-value" id="checkoutProductCount">0</span>
          </div>
          
          <div class="checkout-products-list" id="checkoutProductsList">
            <!-- Los productos se cargarán aquí dinámicamente -->
          </div>
          
          <div class="checkout-summary-total">
            <div class="summary-total-row">
              <span class="summary-total-label">Subtotal:</span>
              <span class="summary-total-value" id="checkoutSubtotal">$0.00</span>
            </div>
            <div class="summary-total-row">
              <span class="summary-total-label">Envío:</span>
              <span class="summary-total-value" id="checkoutEnvio">Gratis</span>
            </div>
            <div class="summary-grand-total">
              <span class="summary-total-label">Total final:</span>
              <span class="summary-total-value" id="checkoutTotalAmount">$0.00</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Pasos del checkout -->
      <div class="checkout-right-panel">
        <!-- Spinner para cambio de paso -->
        <div class="step-spinner" id="stepSpinner">
          <div class="spinner"></div>
          <p class="step-spinner-text">Cargando...</p>
        </div>
        
        <!-- Barra de progreso -->
        <div class="progress-bar" id="progressBar">
          <div class="progress-step active" id="step1">
            <div class="step-circle">1</div>
            <div class="step-label">Entrega</div>
          </div>
          <div class="progress-step" id="step2">
            <div class="step-circle">2</div>
            <div class="step-label">Pago</div>
          </div>
          <div class="progress-step" id="step3">
            <div class="step-circle">3</div>
            <div class="step-label">Confirmación</div>
          </div>
        </div>
        
        <!-- Paso 1: Datos de entrega -->
        <div class="checkout-step" id="stepContent1">
          <h2 class="step-title">Información de Entrega</h2>
          
          <div class="step-image-container">
            <img src="img/cocodriloenvio.png" alt="Entrega" class="step-image">
          </div>
          
          <form class="delivery-form" id="fullDeliveryForm">
            <div class="form-group">
              <label for="fullBuilding">Edificio de entrega</label>
              <select id="fullBuilding" name="fullBuilding" required>
                <option value="">Selecciona un edificio</option>
                <option value="A">Edificio A</option>
                <option value="B">Edificio B</option>
                <option value="C">Edificio C</option>
                <option value="D">Edificio D</option>
                <option value="X">Edificio X</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="fullClassroom">Salón de entrega</label>
              <select id="fullClassroom" name="fullClassroom" disabled required>
                <option value="">Selecciona un salón</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="fullRecipientName">Características de la persona que recibe</label>
              <input type="text" id="fullRecipientName" name="fullRecipientName" placeholder="Nombre completo del destinatario" required>
            </div>
            
            <div class="form-group">
              <label for="fullRecipientPhone">Teléfono del destinatario</label>
              <input type="tel" id="fullRecipientPhone" name="fullRecipientPhone" placeholder="Número de teléfono" required>
            </div>
            
            <div class="form-group">
              <label for="fullRecipientEmail">Correo electrónico</label>
              <input type="email" id="fullRecipientEmail" name="fullRecipientEmail" placeholder="correo@ejemplo.com" required>
            </div>
            
            <div class="form-group">
              <label for="fullSpecialInstructions">Instrucciones especiales (opcional)</label>
              <textarea id="fullSpecialInstructions" name="fullSpecialInstructions" rows="3" placeholder="Ej: Entregar en recepción, llamar antes de llegar, etc."></textarea>
            </div>
          </form>
          
          <div class="checkout-navigation">
            <button class="nav-btn nav-btn-secondary" id="backToCartBtnFull">Volver al carrito</button>
            <button class="nav-btn" id="continueToPaymentFullBtn">Continuar al pago</button>
          </div>
        </div>
        
        <!-- Paso 2: Método de pago -->
        <div class="checkout-step" id="stepContent2">
          <h2 class="step-title">Método de Pago</h2>
          
          <div class="step-image-container">
            <img src="img/procesodepago.png" alt="Pago" class="step-image">
          </div>
          
          <div class="payment-options">
            <div class="payment-option" data-method="paypal">
              <div class="payment-icon">
                <i class="fab fa-paypal"></i>
              </div>
              <div class="payment-label">PayPal</div>
              <div class="payment-radio">
                <input type="radio" name="fullPaymentMethod" value="paypal" id="fullPaypalRadio">
              </div>
            </div>
            
            <div class="payment-option" data-method="card">
              <div class="payment-icon">
                <i class="far fa-credit-card"></i>
              </div>
              <div class="payment-label">Tarjeta de Débito/Crédito</div>
              <div class="payment-radio">
                <input type="radio" name="fullPaymentMethod" value="card" id="fullCardRadio">
              </div>
            </div>
            
            <div class="payment-option" data-method="cash">
              <div class="payment-icon">
                <i class="fas fa-money-bill-wave"></i>
              </div>
              <div class="payment-label">Efectivo</div>
              <div class="payment-radio">
                <input type="radio" name="fullPaymentMethod" value="cash" id="fullCashRadio">
              </div>
            </div>
          </div>
          
          <!-- Campos de tarjeta -->
          <div class="card-fields" id="fullCardFields">
            <h3 class="checkout-text" style="font-size: 18px; margin-bottom: 20px;">Datos de la tarjeta</h3>
            
            <div class="form-group">
              <label for="fullCardNumber">Número de tarjeta</label>
              <input type="text" id="fullCardNumber" name="fullCardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
            </div>
            
            <div class="form-group">
              <label for="fullCardHolder">Nombre del titular</label>
              <input type="text" id="fullCardHolder" name="fullCardHolder" placeholder="Como aparece en la tarjeta">
            </div>
            
            <div class="expiry-cvv-container">
              <div class="form-group">
                <label for="fullExpiryDate">(MM/AA)</label>
                <input type="text" id="fullExpiryDate" name="fullExpiryDate" placeholder="MM/AA" maxlength="5" style="width: 100%; box-sizing: border-box; margin-right: 10px;">
              </div>
              
              <div class="form-group">
                <label for="fullCvv">CVV</label>
                <input type="text" id="fullCvv" name="fullCvv" placeholder="123" maxlength="4" style="width: 100%; box-sizing: border-box;">
              </div>
            </div>
          </div>
          
          <div class="checkout-navigation">
            <button class="nav-btn nav-btn-secondary" id="backToDeliveryBtn">Volver a entrega</button>
            <button class="nav-btn" id="processPaymentBtn">Continuar con el pago</button>
          </div>
        </div>
        
        <!-- Paso 3: Confirmación -->
        <div class="checkout-step" id="stepContent3">
          <div class="confetti-success" id="confettiSuccess"></div>
          
          <div class="confirmation-content">
            <img src="img/compraexitosa.png" alt="Confirmación Nutricroc" class="confirmation-image-large">
            <h2 class="confirmation-title">¡Compra exitosa!</h2>
            <p class="confirmation-message">Tu compra se ha realizado con éxito. Revisa tu correo electrónico para la confirmación de tu compra. ¡Esperamos que disfrutes nuestros deliciosos postres!</p>
            
            <!-- Botón de reenviar correo -->
            <button class="reenviar-correo-btn" id="reenviarCorreoBtnFull">
              Reenviar correo
            </button>
            
            <div class="confirmation-details" style="margin-top: 30px; width: 100%; max-width: 500px; background: #f9f9f9; padding: 20px; border-radius: 10px;">
              <div class="summary-total-row">
                <span class="summary-total-label">Número de pedido:</span>
                <span class="summary-total-value" id="confirmationOrder">NUTR-2025-001234</span>
              </div>
              <div class="summary-total-row">
                <span class="summary-total-label">Fecha del pedido:</span>
                <span class="summary-total-value" id="confirmationDate">15 Dic 2025</span>
              </div>
              <div class="summary-total-row">
                <span class="summary-total-label">Método de pago:</span>
                <span class="summary-total-value" id="confirmationMethod">PayPal</span>
              </div>
              <div class="summary-total-row">
                <span class="summary-total-label">Subtotal:</span>
                <span class="summary-total-value" id="confirmationSubtotal">$0.00</span>
              </div>
              <div class="summary-total-row">
                <span class="summary-total-label">Envío:</span>
                <span class="summary-total-value" id="confirmationEnvio">Gratis</span>
              </div>
              <div class="summary-total-row" style="font-weight: bold; color: #1e3d24; margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                <span class="summary-total-label">Total final:</span>
                <span class="summary-total-value" id="confirmationTotal">$0.00</span>
              </div>
            </div>
            
            <div class="checkout-navigation" style="margin-top: 40px;">
              <button class="nav-btn" id="finishCheckoutBtn">Seguir comprando</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="header-image">
    <h1>Contacto</h1>
    <img src="img/cocodrilo1.png" alt="Cocodrilo" class="crocodile-image">
  </div>

  <section class="contact-section">
    <div class="contact-box">
      <h2>Horarios</h2>
      <p>Lunes – Viernes <br> 08:00 – 17:30</p>
      <p>Sábado <br> 09:00 – 16:00</p>
      <p>Domingo <br> CERRADO</p>
    </div>

    <div class="contact-box">
      <h2>Enviar Mensaje</h2>
      <form class="contact-form">
        <input type="text" placeholder="Tu Nombre" required>
        <input type="email" placeholder="Tu Correo" required>
        <textarea placeholder="Escribe tu mensaje" required></textarea>
        <button type="submit">Enviar</button>
      </form>
    </div>

    <div class="contact-box">
      <h2>Nuestros Contactos</h2>
      <p>Dirección Tec<br>Dirección Tec</p>
      <p>+1 203-284-2818</p>
      <p>+1 203-284-2919</p>
      <p>info@nutricroc.com</p>
      <p>ventas@nutricroc.com</p>
    </div>
  </section>

  <div class="footer-section">
    <div class="footer-container">
      <div class="footer-left">
        <h2 class="footer-title">Nutricroc</h2>
        <h3 class="footer-subtitle">Síguenos</h3>
        <div class="social-icons">
          <a href="#" class="social-icon">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="#" class="social-icon">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="#" class="social-icon">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="#" class="social-icon">
            <i class="fab fa-pinterest"></i>
          </a>
        </div>
      </div>
      
      <div class="footer-right">
        <h3 class="footer-subtitle">Recibe Nuestras Noticias Dulces</h3>
        <form class="newsletter-form">
          <input type="email" class="newsletter-input" placeholder="Tu Dirección de Email" required>
          <button type="submit" class="newsletter-btn">Suscribirse</button>
        </form>
      </div>
    </div>
    
    <div class="footer-bottom">
    </div>
  </div>

  <button class="scroll-to-top" id="scrollToTop">
    <i class="fas fa-chevron-up"></i>
  </button>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Variables globales para el carrito
      let cartItems = [];
      let isLoggedIn = false;
      
      // Elementos del carrito
      const cartBtn = document.getElementById('cartBtn');
      const cartOverlay = document.getElementById('cartOverlay');
      const cartSidebar = document.getElementById('cartSidebar');
      const closeCart = document.getElementById('closeCart');
      const cartCount = document.getElementById('cartCount');
      const cartCountTitle = document.getElementById('cartCountTitle');
      const cartItemsContainer = document.getElementById('cartItemsContainer');
      const cartSummary = document.getElementById('cartSummary');
      const summaryProductCount = document.getElementById('summaryProductCount');
      const summarySubtotal = document.getElementById('summarySubtotal');
      const summaryEnvio = document.getElementById('summaryEnvio');
      const summaryTotalAmount = document.getElementById('summaryTotalAmount');
      const notification = document.getElementById('notification');
      const checkoutBtn = document.getElementById('checkoutBtn');
      
      // Elementos del usuario
      const userBtn = document.getElementById('userBtn');
      const userDropdown = document.getElementById('userDropdown');
      const loginLink = document.getElementById('loginLink');
      const registerLink = document.getElementById('registerLink');
      const accountLink = document.getElementById('accountLink');
      
      // Elementos de autenticación
      const authOverlay = document.getElementById('authOverlay');
      const authSidebar = document.getElementById('authSidebar');
      const closeAuth = document.getElementById('closeAuth');
      const authTitle = document.getElementById('authTitle');
      const authImage = document.getElementById('authImage');
      const authForm = document.getElementById('authForm');
      const nameField = document.getElementById('nameField');
      const confirmPasswordField = document.getElementById('confirmPasswordField');
      const authSubmitBtn = document.getElementById('authSubmitBtn');
      const authSwitchText = document.getElementById('authSwitchText');
      const authSwitchLink = document.getElementById('authSwitchLink');
      
      // Elementos para notificaciones
      const stockNotification = document.getElementById('stockNotification');
      const paymentErrorNotification = document.getElementById('paymentErrorNotification');
      const emailSentNotification = document.getElementById('emailSentNotification');
      const reenvioNotification = document.getElementById('reenvioNotification');
      
      // Elementos del carrito (edición)
      const editScreen = document.getElementById('editScreen');
      const editBack = document.getElementById('editBack');
      const editProductImages = document.getElementById('editProductImages');
      const editProductName = document.getElementById('editProductName');
      const editProductPrice = document.getElementById('editProductPrice');
      const editQuantityInput = document.getElementById('editQuantityInput');
      const decreaseQuantityBtn = document.getElementById('decreaseQuantity');
      const increaseQuantityBtn = document.getElementById('increaseQuantity');
      const saveEditBtn = document.getElementById('saveEditBtn');
      
      // Elementos del modal de cambiar correo
      const cambiarCorreoModal = document.getElementById('cambiarCorreoModal');
      const closeCambiarCorreo = document.getElementById('closeCambiarCorreo');
      const cambiarCorreoForm = document.getElementById('cambiarCorreoForm');
      const correoRenviadoNotification = document.getElementById('correoRenviadoNotification');
      
      // Elementos para recuperación de contraseña
      const forgotPasswordLink = document.getElementById('forgotPasswordLink');
      const recoveryScreen = document.getElementById('recoveryScreen');
      const recoveryBack = document.getElementById('recoveryBack');
      const recoveryForm = document.getElementById('recoveryForm');
      const sendRecoveryBtn = document.getElementById('sendRecoveryBtn');
      
      // Elementos del checkout FULLSCREEN (DEL SEGUNDO CÓDIGO)
      const checkoutFullscreen = document.getElementById('checkoutFullscreen');
      const closeCheckoutFull = document.getElementById('closeCheckoutFull');
      const checkoutProductsList = document.getElementById('checkoutProductsList');
      const checkoutProductCount = document.getElementById('checkoutProductCount');
      const checkoutSubtotal = document.getElementById('checkoutSubtotal');
      const checkoutEnvio = document.getElementById('checkoutEnvio');
      const checkoutTotalAmount = document.getElementById('checkoutTotalAmount');
      
      // Barra de progreso y pasos
      const progressBar = document.getElementById('progressBar');
      const step1 = document.getElementById('step1');
      const step2 = document.getElementById('step2');
      const step3 = document.getElementById('step3');
      const stepContent1 = document.getElementById('stepContent1');
      const stepContent2 = document.getElementById('stepContent2');
      const stepContent3 = document.getElementById('stepContent3');
      const stepSpinner = document.getElementById('stepSpinner');
      
      // Elementos del paso de entrega
      const fullDeliveryForm = document.getElementById('fullDeliveryForm');
      const fullBuilding = document.getElementById('fullBuilding');
      const fullClassroom = document.getElementById('fullClassroom');
      const backToCartBtnFull = document.getElementById('backToCartBtnFull');
      const continueToPaymentFullBtn = document.getElementById('continueToPaymentFullBtn');
      
      // Elementos del paso de pago
      const fullPaymentOptions = document.querySelectorAll('.payment-option');
      const fullCardFields = document.getElementById('fullCardFields');
      const fullCardNumber = document.getElementById('fullCardNumber');
      const fullCardHolder = document.getElementById('fullCardHolder');
      const fullExpiryDate = document.getElementById('fullExpiryDate');
      const fullCvv = document.getElementById('fullCvv');
      const backToDeliveryBtn = document.getElementById('backToDeliveryBtn');
      const processPaymentBtn = document.getElementById('processPaymentBtn');
      
      // Elementos del paso de confirmación
      const confirmationDate = document.getElementById('confirmationDate');
      const confirmationMethod = document.getElementById('confirmationMethod');
      const confirmationOrder = document.getElementById('confirmationOrder');
      const confirmationSubtotal = document.getElementById('confirmationSubtotal');
      const confirmationEnvio = document.getElementById('confirmationEnvio');
      const confirmationTotal = document.getElementById('confirmationTotal');
      const finishCheckoutBtn = document.getElementById('finishCheckoutBtn');
      const confettiSuccess = document.getElementById('confettiSuccess');
      const reenviarCorreoBtnFull = document.getElementById('reenviarCorreoBtnFull');
      
      // Scroll to top
      const scrollToTopBtn = document.getElementById('scrollToTop');
      
      // Variables de estado
      let isLoginMode = true;
      let editingProductIndex = -1;
      let currentCheckoutFullStep = 1;
      let selectedPaymentMethod = null;
      let reenviarAttempts = 0;
      const MAX_REENVIAR_ATTEMPTS = 3;
      let reenviarBtnDisabled = false;
      let reenviarTimeout = null;
      
      // IMPORTANTE: Misma clave de almacenamiento que el segundo código
      const CART_STORAGE_KEY = 'nutricroc_shared_cart';
      const COMPRA_COMPLETADA_KEY = 'compra_completada';
      
      // Datos de los edificios y salones
      const buildingClassrooms = {
        'A': Array.from({length: 11}, (_, i) => `Salón ${i + 1}`),
        'B': Array.from({length: 11}, (_, i) => `Salón ${i + 1}`),
        'C': Array.from({length: 11}, (_, i) => `Salón ${i + 1}`),
        'D': Array.from({length: 7}, (_, i) => `Salón ${i + 1}`),
        'X': Array.from({length: 7}, (_, i) => `Salón ${i + 1}`)
      };
      
      // ===== FUNCIONES DE NOTIFICACIONES =====
      function showNotification(message = 'El producto se agregó de manera exitosa') {
        notification.querySelector('.notification-text').textContent = message;
        notification.classList.add('show');
        setTimeout(() => {
          notification.classList.remove('show');
        }, 3000);
      }

      function showStockNotification() {
        stockNotification.classList.add('show');
        setTimeout(() => {
          stockNotification.classList.remove('show');
        }, 3000);
      }

      function showEmailSentNotification() {
        emailSentNotification.classList.add('show');
        setTimeout(() => {
          emailSentNotification.classList.remove('show');
        }, 3000);
      }

      function showPaymentErrorNotification() {
        paymentErrorNotification.classList.add('show');
        setTimeout(() => {
          paymentErrorNotification.classList.remove('show');
        }, 5000);
      }

      function showReenvioNotification() {
        reenvioNotification.classList.add('show');
        setTimeout(() => {
          reenvioNotification.classList.remove('show');
        }, 3000);
      }
      
      // ===== FUNCIONES DEL CARRITO =====
      function loadCartFromStorage() {
        const savedCart = localStorage.getItem(CART_STORAGE_KEY);
        if (savedCart) {
          try {
            cartItems = JSON.parse(savedCart);
          } catch (e) {
            console.error('Error al cargar el carrito:', e);
            cartItems = [];
          }
        }
      }

      function saveCartToStorage() {
        localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cartItems));
      }

      function updateCartCount() {
        let totalQuantity = 0;
        cartItems.forEach(item => {
          totalQuantity += item.quantity;
        });
        
        cartCount.textContent = totalQuantity;
        cartCountTitle.textContent = `(${totalQuantity})`;
      }

      function calculateCartTotals() {
        let subtotal = 0;
        cartItems.forEach(item => {
          subtotal += parseFloat(item.price) * item.quantity;
        });
        
        const envio = 0; // Envío gratis
        const total = subtotal + envio;
        
        return {
          subtotal: subtotal.toFixed(2),
          envio: envio.toFixed(2),
          total: total.toFixed(2)
        };
      }

      function updateCartTotal() {
        const totals = calculateCartTotals();
        
        summaryProductCount.textContent = cartItems.length;
        summarySubtotal.textContent = `$${totals.subtotal}`;
        summaryEnvio.textContent = 'Gratis';
        summaryTotalAmount.textContent = `$${totals.total}`;
        
        checkoutProductCount.textContent = cartItems.length;
        checkoutSubtotal.textContent = `$${totals.subtotal}`;
        checkoutEnvio.textContent = 'Gratis';
        checkoutTotalAmount.textContent = `$${totals.total}`;
        
        confirmationSubtotal.textContent = `$${totals.subtotal}`;
        confirmationEnvio.textContent = 'Gratis';
        confirmationTotal.textContent = `$${totals.total}`;
      }

      function toggleCartSummary() {
        if (cartItems.length > 0) {
          cartSummary.classList.add('visible');
        } else {
          cartSummary.classList.remove('visible');
        }
      }

      function renderCartItems() {
        if (cartItems.length === 0) {
          cartItemsContainer.innerHTML = `
            <div class="cart-empty">
              <div class="cart-empty-image"></div>
              <p class="cart-empty-text">Aún no cuentas con productos</p>
              <button class="discover-btn" onclick="window.location.href='productos.html'">Descubrir</button>
            </div>
          `;
        } else {
          let itemsHTML = '';
          cartItems.forEach((item, index) => {
            const subtotal = (parseFloat(item.price) * item.quantity).toFixed(2);
            itemsHTML += `
              <div class="cart-item">
                <div class="cart-item-image">
                  <img src="${item.image}" alt="${item.name}" onerror="this.src='img/default-product.jpg'">
                </div>
                <div class="cart-item-details">
                  <div class="cart-item-info">
                    <div class="cart-item-price">$${subtotal}</div>
                    <div class="cart-item-actions">
                      <button class="cart-item-action edit-item" data-index="${index}">
                        <i class="fas fa-edit"></i>
                      </button>
                      <button class="cart-item-action remove-item" data-index="${index}">
                        <i class="fas fa-trash"></i>
                      </button>
                    </div>
                  </div>
                  <div class="cart-item-name">${item.name}</div>
                  <div class="cart-item-quantity">
                    <span class="quantity-display">${item.quantity} × $${item.price}</span>
                  </div>
                </div>
              </div>
            `;
          });
          cartItemsContainer.innerHTML = itemsHTML;
          
          // Agregar event listeners para editar productos
          document.querySelectorAll('.edit-item').forEach(button => {
            button.addEventListener('click', function(e) {
              e.stopPropagation();
              const index = this.getAttribute('data-index');
              showEditScreen(index);
            });
          });
          
          // Agregar event listeners para eliminar productos
          document.querySelectorAll('.remove-item').forEach(button => {
            button.addEventListener('click', function(e) {
              e.stopPropagation();
              const index = this.getAttribute('data-index');
              showDeleteSpinner(index);
            });
          });
        }
      }
      
      // NUEVA FUNCIÓN: Renderizar productos en el checkout
      function renderCheckoutProducts() {
        if (cartItems.length === 0) {
          checkoutProductsList.innerHTML = '<p class="cart-empty-text">No hay productos en el carrito</p>';
          return;
        }
        
        let itemsHTML = '';
        cartItems.forEach((item, index) => {
          const subtotal = (parseFloat(item.price) * item.quantity).toFixed(2);
          itemsHTML += `
            <div class="checkout-product-item">
              <div class="checkout-product-image">
                <img src="${item.image}" alt="${item.name}" onerror="this.src='img/default-product.jpg'">
              </div>
              <div class="checkout-product-details">
                <div class="checkout-product-name">${item.name}</div>
                <div class="checkout-product-quantity">${item.quantity} × $${item.price}</div>
                <div class="checkout-product-price">$${subtotal}</div>
              </div>
            </div>
          `;
        });
        checkoutProductsList.innerHTML = itemsHTML;
      }

      function updateCartUI() {
        updateCartCount();
        updateCartTotal();
        renderCartItems();
        renderCheckoutProducts();
        toggleCartSummary();
        
        // NUEVO: Disparar evento para notificar cambios en el carrito
        window.dispatchEvent(new CustomEvent('cartUpdated'));
      }
      
      // NUEVO: Escuchar eventos de actualización del carrito
      window.addEventListener('cartUpdated', function() {
        updateCartCount();
      });
      
      // NUEVA FUNCIÓN: Mostrar pantalla de edición
      function showEditScreen(index) {
        editingProductIndex = index;
        const product = cartItems[index];
        
        editProductName.textContent = product.name;
        editProductPrice.textContent = `$${product.price}`;
        editQuantityInput.value = product.quantity;
        
        editProductImages.innerHTML = '';
        for (let i = 0; i < 2; i++) {
          const imageDiv = document.createElement('div');
          imageDiv.className = 'edit-product-image';
          const img = document.createElement('img');
          img.src = product.image;
          img.alt = product.name;
          img.onerror = function() {
            this.src = 'img/default-product.jpg';
          };
          imageDiv.appendChild(img);
          editProductImages.appendChild(imageDiv);
        }
        
        editScreen.style.display = 'flex';
        setTimeout(() => {
          editScreen.classList.add('active');
        }, 10);
      }
      
      // NUEVA FUNCIÓN: Ocultar pantalla de edición
      function hideEditScreen() {
        editScreen.classList.add('slide-out');
        setTimeout(() => {
          editScreen.classList.remove('active');
          editScreen.classList.remove('slide-out');
          editScreen.style.display = 'none';
          editingProductIndex = -1;
        }, 500);
      }
      
      // NUEVA FUNCIÓN: Mostrar spinner de eliminación - CORREGIDA
      function showDeleteSpinner(index) {
        // Obtener el elemento del producto específico
        const cartItem = document.querySelectorAll('.cart-item')[index];
        if (!cartItem) return;
        
        // Crear el spinner SOLO sobre el producto específico
        const spinnerHTML = `
          <div class="delete-spinner">
            <div class="spinner"></div>
            <p>Eliminando producto...</p>
          </div>
        `;
        
        // Agregar el spinner al elemento del producto específico
        cartItem.style.position = 'relative';
        cartItem.insertAdjacentHTML('beforeend', spinnerHTML);
        
        setTimeout(() => {
          const spinner = cartItem.querySelector('.delete-spinner');
          if (spinner) spinner.remove();
          showDeleteConfirmation(index);
        }, 1500);
      }
      
      // NUEVA FUNCIÓN: Mostrar confirmación de eliminación - CORREGIDA
      function showDeleteConfirmation(index) {
        // Obtener el elemento del producto específico
        const cartItem = document.querySelectorAll('.cart-item')[index];
        if (!cartItem) return;
        
        const confirmationHTML = `
          <div class="delete-confirmation">
            <div class="confirmation-image">
              <i class="fas fa-check"></i>
            </div>
            <p class="confirmation-text">Producto eliminado de manera exitosa</p>
          </div>
        `;
        
        // Agregar la confirmación al elemento del producto específico
        cartItem.insertAdjacentHTML('beforeend', confirmationHTML);
        
        setTimeout(() => {
          const confirmation = cartItem.querySelector('.delete-confirmation');
          if (confirmation) confirmation.remove();
          removeFromCart(index);
        }, 1500);
      }
      
      // FUNCIÓN IMPORTANTE: Agregar producto al carrito
      function addToCart(product) {
        const quantity = parseInt(product.quantity) || 1;
        
        if (quantity > 30) {
          showStockNotification();
          return;
        }
        
        const existingItemIndex = cartItems.findIndex(item => item.id === product.id);
        
        if (existingItemIndex !== -1) {
          const newQuantity = cartItems[existingItemIndex].quantity + quantity;
          if (newQuantity > 30) {
            showStockNotification();
            return;
          }
          cartItems[existingItemIndex].quantity = newQuantity;
        } else {
          product.quantity = quantity;
          cartItems.push(product);
        }
        
        updateCartUI();
        saveCartToStorage();
        showNotification('Producto agregado al carrito');
      }

      function removeFromCart(index) {
        if (index >= 0 && index < cartItems.length) {
          cartItems.splice(index, 1);
          updateCartUI();
          saveCartToStorage();
        }
      }
      
      // NUEVA FUNCIÓN: Actualizar cantidad con validación de stock
      function updateProductQuantity(index, newQuantity) {
        if (newQuantity < 1) newQuantity = 1;
        
        // Validación: Verificar si la cantidad es mayor a 30
        if (newQuantity > 30) {
          showStockNotification();
          editQuantityInput.value = cartItems[index].quantity;
          return false;
        }
        
        if (index >= 0 && index < cartItems.length) {
          cartItems[index].quantity = newQuantity;
          updateCartUI();
          saveCartToStorage();
          return true;
        }
        return false;
      }

      function clearCart() {
        cartItems = [];
        updateCartUI();
        saveCartToStorage();
        // Limpiar también la bandera de compra completada
        localStorage.removeItem(COMPRA_COMPLETADA_KEY);
      }
      
      // ===== FUNCIONALIDAD DEL CARRITO =====
      cartBtn.addEventListener('click', () => {
        loadCartFromStorage();
        updateCartUI();
        
        cartOverlay.style.display = 'block';
        cartSidebar.classList.add('open');
        document.body.style.overflow = 'hidden';
      });

      function closeCartFunc() {
        cartOverlay.style.display = 'none';
        cartSidebar.classList.remove('open');
        document.body.style.overflow = 'auto';
        confettiSuccess.innerHTML = '';
      }

      closeCart.addEventListener('click', closeCartFunc);
      cartOverlay.addEventListener('click', closeCartFunc);
      
      // Botón de comprar (checkout) - AHORA ABRE EL CHECKOUT FULLSCREEN
      checkoutBtn.addEventListener('click', () => {
        if (cartItems.length === 0) {
          alert('Tu carrito está vacío. Agrega productos antes de comprar.');
          return;
        }
        closeCartFunc();
        setTimeout(() => {
          showCheckoutFullscreen();
        }, 300);
      });
      
      // ===== FUNCIONALIDAD DEL USUARIO =====
      userBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        userDropdown.classList.toggle('show');
      });

      document.addEventListener('click', () => {
        userDropdown.classList.remove('show');
      });

      loginLink.addEventListener('click', (e) => {
        e.preventDefault();
        userDropdown.classList.remove('show');
        openAuthModal(true);
      });

      registerLink.addEventListener('click', (e) => {
        e.preventDefault();
        userDropdown.classList.remove('show');
        openAuthModal(false);
      });

      accountLink.addEventListener('click', (e) => {
        e.preventDefault();
        userDropdown.classList.remove('show');
        alert('Redirigiendo a Mi Cuenta');
      });
      
      // ===== FUNCIONALIDAD DE AUTENTICACIÓN =====
      function openAuthModal(login) {
        isLoginMode = login;
        
        if (isLoginMode) {
          authTitle.textContent = 'Iniciar Sesión';
          authSubmitBtn.textContent = 'Iniciar Sesión';
          authSwitchText.textContent = '¿No tienes una cuenta? ';
          authSwitchLink.textContent = 'Regístrate';
          nameField.style.display = 'none';
          confirmPasswordField.style.display = 'none';
          authImage.src = 'img/loginnutricroc.png';
        } else {
          authTitle.textContent = 'Registrarse';
          authSubmitBtn.textContent = 'Registrarse';
          authSwitchText.textContent = '¿Ya tienes una cuenta? ';
          authSwitchLink.textContent = 'Inicia Sesión';
          nameField.style.display = 'flex';
          confirmPasswordField.style.display = 'flex';
          authImage.src = 'img/regristrarnutricroc.png';
        }
        
        authOverlay.style.display = 'block';
        authSidebar.classList.add('open');
        document.body.style.overflow = 'hidden';
        hideRecoveryScreen();
      }

      function closeAuthFunc() {
        authOverlay.style.display = 'none';
        authSidebar.classList.remove('open');
        document.body.style.overflow = 'auto';
        authForm.reset();
        hideRecoveryScreen();
      }

      closeAuth.addEventListener('click', closeAuthFunc);
      authOverlay.addEventListener('click', closeAuthFunc);

      authSwitchLink.addEventListener('click', (e) => {
        e.preventDefault();
        openAuthModal(!isLoginMode);
      });
      
      // Enlace "Olvidaste tu contraseña"
      forgotPasswordLink.addEventListener('click', (e) => {
        e.preventDefault();
        showRecoveryScreen();
      });
      
      // Botón para volver desde recuperación
      recoveryBack.addEventListener('click', () => {
        hideRecoveryScreen();
      });
      
      // Envío de formulario de recuperación
      recoveryForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        const email = document.getElementById('recoveryEmail').value;
        const confirmEmail = document.getElementById('confirmRecoveryEmail').value;
        
        if (email !== confirmEmail) {
          alert('Los correos electrónicos no coinciden');
          return;
        }
        
        if (!email) {
          alert('Por favor ingresa un correo electrónico válido');
          return;
        }
        
        // Enviar correo de recuperación
        sendRecoveryEmail(email);
      });

      function showRecoveryScreen() {
        recoveryScreen.classList.add('active');
        recoveryForm.reset();
      }

      function hideRecoveryScreen() {
        recoveryScreen.classList.remove('active');
      }

      function sendRecoveryEmail(email) {
        console.log('Enviando correo de recuperación a:', email);
        showEmailSentNotification();
        setTimeout(() => {
          hideRecoveryScreen();
        }, 1000);
      }

      authForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        if (isLoginMode) {
          const email = document.getElementById('email').value;
          const password = document.getElementById('password').value;
          
          if (email && password) {
            isLoggedIn = true;
            updateUserInterface();
            closeAuthFunc();
            alert('¡Inicio de sesión exitoso!');
          }
        } else {
          const name = document.getElementById('name').value;
          const email = document.getElementById('email').value;
          const password = document.getElementById('password').value;
          const confirmPassword = document.getElementById('confirmPassword').value;
          
          if (password !== confirmPassword) {
            alert('Las contraseñas no coinciden');
            return;
          }
          
          if (name && email && password) {
            isLoggedIn = true;
            updateUserInterface();
            closeAuthFunc();
            alert('¡Registro exitoso!');
          }
        }
      });

      function updateUserInterface() {
        if (isLoggedIn) {
          loginLink.style.display = 'none';
          registerLink.style.display = 'none';
          accountLink.style.display = 'block';
        } else {
          loginLink.style.display = 'block';
          registerLink.style.display = 'block';
          accountLink.style.display = 'none';
        }
      }
      
      // ===== FUNCIONES DEL CHECKOUT FULLSCREEN =====
      function showCheckoutFullscreen() {
        checkoutFullscreen.classList.add('active');
        document.body.style.overflow = 'hidden';
        
        showCheckoutFullStep(1);
        renderCheckoutProducts();
        resetReenviarBtn();
      }

      function closeCheckoutFullscreen() {
        if (currentCheckoutFullStep === 3) {
          clearCart();
        }
        
        checkoutFullscreen.classList.remove('active');
        document.body.style.overflow = 'auto';
        resetCheckoutFullForms();
      }

      function showCheckoutFullStep(step) {
        currentCheckoutFullStep = step;
        
        stepContent1.classList.remove('active');
        stepContent2.classList.remove('active');
        stepContent3.classList.remove('active');
        
        step1.classList.remove('active', 'completed');
        step2.classList.remove('active', 'completed');
        step3.classList.remove('active', 'completed');
        
        stepSpinner.classList.add('active');
        
        setTimeout(() => {
          stepSpinner.classList.remove('active');
          
          if (step === 1) {
            stepContent1.classList.add('active');
            step1.classList.add('active');
          } else if (step === 2) {
            stepContent2.classList.add('active');
            step1.classList.add('completed');
            step2.classList.add('active');
          } else if (step === 3) {
            stepContent3.classList.add('active');
            step1.classList.add('completed');
            step2.classList.add('completed');
            step3.classList.add('active');
            
            generateConfirmationInfo();
            createConfettiSuccess();
            localStorage.setItem(COMPRA_COMPLETADA_KEY, 'true');
          }
        }, 1000);
      }

      function resetCheckoutFullForms() {
        fullDeliveryForm.reset();
        fullClassroom.disabled = true;
        fullClassroom.innerHTML = '<option value="">Selecciona un salón</option>';
        
        fullPaymentOptions.forEach(option => option.classList.remove('selected'));
        selectedPaymentMethod = null;
        fullCardFields.classList.remove('show');
        fullCardNumber.value = '';
        fullCardHolder.value = '';
        fullExpiryDate.value = '';
        fullCvv.value = '';
        
        currentCheckoutFullStep = 1;
      }

      function updateFullClassroomOptions() {
        const building = fullBuilding.value;
        fullClassroom.innerHTML = '<option value="">Selecciona un salón</option>';
        
        if (building && buildingClassrooms[building]) {
          buildingClassrooms[building].forEach(classroom => {
            const option = document.createElement('option');
            option.value = classroom;
            option.textContent = classroom;
            fullClassroom.appendChild(option);
          });
          fullClassroom.disabled = false;
        } else {
          fullClassroom.disabled = true;
        }
      }

      function validateFullDeliveryForm() {
        const building = fullBuilding.value;
        const classroom = fullClassroom.value;
        const recipientName = document.getElementById('fullRecipientName').value;
        const recipientPhone = document.getElementById('fullRecipientPhone').value;
        const recipientEmail = document.getElementById('fullRecipientEmail').value;
        
        return building && classroom && recipientName.trim() && recipientPhone.trim() && recipientEmail.trim();
      }

      function validateFullPaymentForm() {
        if (!selectedPaymentMethod) {
          return false;
        }
        
        if (selectedPaymentMethod === 'card') {
          const cardNumber = fullCardNumber.value.replace(/\s/g, '');
          const cardHolder = fullCardHolder.value.trim();
          const expiryDate = fullExpiryDate.value;
          const cvv = fullCvv.value;
          
          const cardNumberValid = /^\d{16}$/.test(cardNumber);
          const cardHolderValid = cardHolder.length >= 3;
          const expiryDateValid = /^\d{2}\/\d{2}$/.test(expiryDate);
          const cvvValid = /^\d{3,4}$/.test(cvv);
          
          return cardNumberValid && cardHolderValid && expiryDateValid && cvvValid;
        }
        
        return true;
      }

      function generateConfirmationInfo() {
        const now = new Date();
        const options = { year: 'numeric', month: 'short', day: 'numeric' };
        confirmationDate.textContent = now.toLocaleDateString('es-ES', options);
        
        confirmationMethod.textContent = getPaymentMethodName(selectedPaymentMethod);
        
        const orderNumber = 'NUTR-' + now.getFullYear() + '-' + Math.floor(100000 + Math.random() * 900000);
        confirmationOrder.textContent = orderNumber;
        
        const totals = calculateCartTotals();
        confirmationSubtotal.textContent = `$${totals.subtotal}`;
        confirmationEnvio.textContent = 'Gratis';
        confirmationTotal.textContent = `$${totals.total}`;
      }

      function getPaymentMethodName(method) {
        switch(method) {
          case 'paypal': return 'PayPal';
          case 'card': return 'Tarjeta de crédito/débito';
          case 'cash': return 'Efectivo';
          default: return 'No seleccionado';
        }
      }

      function createConfettiSuccess() {
        confettiSuccess.innerHTML = '';
        for (let i = 0; i < 150; i++) {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.width = Math.random() * 10 + 5 + 'px';
          confetti.style.height = Math.random() * 10 + 5 + 'px';
          confetti.style.backgroundColor = i % 4 === 0 ? '#295732' : 
                                          i % 4 === 1 ? '#1e3d24' : 
                                          i % 4 === 2 ? '#704214' : '#76DCD8';
          confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
          confetti.style.animationDelay = Math.random() * 5 + 's';
          confettiSuccess.appendChild(confetti);
        }
      }
      
      // ===== FUNCIONES PARA CORREO =====
      function resetReenviarBtn() {
        reenviarAttempts = 0;
        reenviarBtnDisabled = false;
        if (reenviarTimeout) {
          clearTimeout(reenviarTimeout);
          reenviarTimeout = null;
        }
        
        const btn = document.getElementById('reenviarCorreoBtnFull');
        if (btn) {
          btn.disabled = false;
          btn.textContent = 'Reenviar correo';
        }
      }

      function disableReenviarBtnTemporalmente() {
        const btn = document.getElementById('reenviarCorreoBtnFull');
        if (!btn) return;
        
        btn.disabled = true;
        btn.textContent = 'Espere 60 segundos';
        
        reenviarTimeout = setTimeout(() => {
          if (reenviarAttempts < MAX_REENVIAR_ATTEMPTS) {
            btn.disabled = false;
            btn.textContent = 'Reenviar correo';
            reenviarBtnDisabled = false;
          }
        }, 60000);
      }

      function handleReenviarCorreo() {
        if (reenviarBtnDisabled || reenviarAttempts >= MAX_REENVIAR_ATTEMPTS) {
          return;
        }
        
        reenviarAttempts++;
        reenviarBtnDisabled = true;
        
        showReenvioNotification();
        
        if (reenviarAttempts >= MAX_REENVIAR_ATTEMPTS) {
          const btn = document.getElementById('reenviarCorreoBtnFull');
          if (btn) {
            btn.disabled = true;
            btn.textContent = 'Límite alcanzado';
          }
        } else {
          disableReenviarBtnTemporalmente();
        }
      }

      function consumirEndpointComprar() {
        // Simulación de envío de correo
        console.log('Correo de compra enviado exitosamente');
      }
      
      // ===== FUNCIONALIDAD DEL CHECKOUT FULLSCREEN =====
      closeCheckoutFull.addEventListener('click', closeCheckoutFullscreen);
      
      fullBuilding.addEventListener('change', updateFullClassroomOptions);
      
      backToCartBtnFull.addEventListener('click', () => {
        closeCheckoutFullscreen();
        setTimeout(() => {
          cartOverlay.style.display = 'block';
          cartSidebar.classList.add('open');
        }, 300);
      });
      
      continueToPaymentFullBtn.addEventListener('click', () => {
        if (validateFullDeliveryForm()) {
          showCheckoutFullStep(2);
        } else {
          alert('Por favor completa todos los campos requeridos de la información de entrega.');
        }
      });
      
      fullPaymentOptions.forEach(option => {
        option.addEventListener('click', () => {
          fullPaymentOptions.forEach(opt => opt.classList.remove('selected'));
          option.classList.add('selected');
          
          const radio = option.querySelector('input[type="radio"]');
          if (radio) {
            radio.checked = true;
          }
          
          selectedPaymentMethod = option.dataset.method;
          if (selectedPaymentMethod === 'card') {
            fullCardFields.classList.add('show');
            setTimeout(() => {
              fullCardFields.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 300);
          } else {
            fullCardFields.classList.remove('show');
          }
        });
      });
      
      fullCardNumber.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        value = value.replace(/(\d{4})(?=\d)/g, '$1 ');
        e.target.value = value.substring(0, 19);
      });
      
      fullExpiryDate.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length >= 2) {
          value = value.substring(0, 2) + '/' + value.substring(2, 4);
        }
        e.target.value = value.substring(0, 5);
      });
      
      fullCvv.addEventListener('input', function(e) {
        e.target.value = e.target.value.replace(/\D/g, '').substring(0, 4);
      });
      
      backToDeliveryBtn.addEventListener('click', () => {
        showCheckoutFullStep(1);
      });
      
      processPaymentBtn.addEventListener('click', () => {
        if (!selectedPaymentMethod) {
          alert('Por favor selecciona un método de pago.');
          return;
        }
        
        if (selectedPaymentMethod === 'card' && !validateFullPaymentForm()) {
          alert('Por favor completa correctamente los datos de pago.');
          return;
        }
        
        if (selectedPaymentMethod === 'card') {
          const cardNumber = fullCardNumber.value.replace(/\s/g, '');
          
          if (cardNumber === '4242424242424242') {
            showPaymentErrorNotification();
            return;
          }
        }
        
        if (selectedPaymentMethod === 'paypal') {
          window.open('https://www.paypal.com', '_blank');
        }
        
        consumirEndpointComprar();
        showCheckoutFullStep(3);
      });
      
      finishCheckoutBtn.addEventListener('click', () => {
        clearCart();
        closeCheckoutFullscreen();
      });
      
      reenviarCorreoBtnFull.addEventListener('click', handleReenviarCorreo);
      
      // ===== FUNCIONALIDAD DE EDICIÓN DEL CARRITO =====
      editBack.addEventListener('click', hideEditScreen);
      
      decreaseQuantityBtn.addEventListener('click', () => {
        let currentValue = parseInt(editQuantityInput.value);
        if (currentValue > 1) {
          editQuantityInput.value = currentValue - 1;
        }
      });
      
      increaseQuantityBtn.addEventListener('click', () => {
        let currentValue = parseInt(editQuantityInput.value);
        editQuantityInput.value = currentValue + 1;
      });
      
      // Guardar cambios con validación de stock
      saveEditBtn.addEventListener('click', () => {
        const newQuantity = parseInt(editQuantityInput.value);
        
        if (newQuantity > 30) {
          showStockNotification();
          return;
        }
        
        if (updateProductQuantity(editingProductIndex, newQuantity)) {
          hideEditScreen();
          showNotification('Cantidad actualizada');
        }
      });
      
      // ===== FUNCIONALIDAD DEL MODAL DE CAMBIAR CORREO =====
      function openCambiarCorreoModal() {
        cambiarCorreoModal.classList.add('active');
        cambiarCorreoForm.reset();
      }

      function closeCambiarCorreoModal() {
        cambiarCorreoModal.classList.remove('active');
      }

      function showCorreoRenviadoNotification() {
        correoRenviadoNotification.classList.add('show');
        setTimeout(() => {
          correoRenviadoNotification.classList.remove('show');
        }, 2000);
      }

      cambiarCorreoBtn.addEventListener('click', () => {
        openCambiarCorreoModal();
      });

      closeCambiarCorreo.addEventListener('click', closeCambiarCorreoModal);

      cambiarCorreoForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        const nuevoCorreo = document.getElementById('nuevoCorreo').value;
        const confirmarCorreo = document.getElementById('confirmarCorreo').value;
        
        if (nuevoCorreo !== confirmarCorreo) {
          alert('Los correos no coinciden');
          return;
        }
        
        if (nuevoCorreo) {
          console.log('Correo actualizado a:', nuevoCorreo);
          showCorreoRenviadoNotification();
          closeCambiarCorreoModal();
        }
      });

      cambiarCorreoModal.addEventListener('click', (e) => {
        if (e.target === cambiarCorreoModal) {
          closeCambiarCorreoModal();
        }
      });
      
      // ===== SCROLL TO TOP =====
      window.addEventListener('scroll', function() {
        if (window.scrollY > 300) {
          scrollToTopBtn.style.display = 'flex';
        } else {
          scrollToTopBtn.style.display = 'none';
        }
      });

      scrollToTopBtn.addEventListener('click', function() {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
      
      // ===== INICIALIZACIÓN =====
      function init() {
        loadCartFromStorage();
        updateCartUI();
        updateUserInterface();
        
        // Verificar si hay una compra completada que limpiar
        const compraCompletada = localStorage.getItem(COMPRA_COMPLETADA_KEY);
        if (compraCompletada === 'true') {
          clearCart();
        }
        
        // Datos de ejemplo para testing
        console.log('Para agregar un producto de ejemplo, usa: addSampleProduct()');
      }
      
      // Hacer funciones disponibles globalmente
      window.addToCart = addToCart;
      window.removeFromCart = removeFromCart;
      window.updateProductQuantity = updateProductQuantity;
      window.clearCart = clearCart;
      window.getCartItems = () => cartItems;
      
      // Función para agregar productos de ejemplo (para testing)
      window.addSampleProduct = function() {
        const sampleProduct = {
          id: Date.now(),
          name: 'Helado de Vainilla',
          price: '12.50',
          image: 'img/postreC1.jpeg',
          quantity: 1
        };
        addToCart(sampleProduct);
      };
      
      // Función para forzar actualización del carrito
      window.refreshCart = function() {
        loadCartFromStorage();
        updateCartUI();
      };

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    });
  </script>
</body>
</html>